import"./modulepreload-polyfill-B5Qt9EMX.js";document.addEventListener("DOMContentLoaded",()=>{const n=localStorage.getItem("token"),e=JSON.parse(localStorage.getItem("userData"));if(!n||!e){alert("Você precisa estar logado para ver sua conta."),window.location.href="/login.html";return}document.getElementById("nomeUsuario").textContent=e.nome,document.getElementById("numeroConta").textContent=e.numeroConta,fetch(`http://localhost:3000/api/user/${e.id}`,{headers:{Authorization:`Bearer ${n}`}}).then(t=>t.json()).then(t=>{document.getElementById("saldo").textContent=parseFloat(t.saldo).toFixed(2).replace(".",","),document.getElementById("fatura").textContent=parseFloat(t.fatura).toFixed(2).replace(".",","),window.historicoFatura=t.historicoFatura||[],window.historicoSaldo=t.historicoSaldo||[]}).catch(t=>{console.error("Erro ao carregar dados do usuário:",t),alert("Erro ao carregar dados da conta.")}),document.getElementById("btnFatura").addEventListener("click",()=>r("fatura")),document.getElementById("btnSaldo").addEventListener("click",()=>r("saldo"));function r(t){const o=document.getElementById("listaHistorico");o.innerHTML="";const d=t==="fatura"?window.historicoFatura:window.historicoSaldo;d.length===0?o.innerHTML="<li>Nenhum dado encontrado.</li>":d.forEach(i=>{const a=document.createElement("li");a.style.padding="8px 0",a.textContent=`${i.data||"Data não disponível"} - R$ ${parseFloat(i.valor).toFixed(2).replace(".",",")}`,o.appendChild(a)}),document.getElementById("historico").style.display="block"}});
